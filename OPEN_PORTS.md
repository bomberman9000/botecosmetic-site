# Как открыть SSH порт (22) на сервере

## Проблема
SSH порт 22 закрыт, поэтому невозможно подключиться к серверу.

## Решение: Открытие портов через панель управления VPS

### Вариант 1: Панель управления провайдера (РЕКОМЕНДУЕТСЯ)

Большинство VPS провайдеров имеют панель управления, где можно настроить файрвол:

#### Timeweb
1. Зайдите в панель управления: https://timeweb.com
2. Выберите ваш VPS сервер
3. Перейдите в раздел **"Файрвол"** или **"Firewall"**
4. Добавьте правило:
   - **Тип:** Входящее соединение (Inbound)
   - **Порт:** 22
   - **Протокол:** TCP
   - **Действие:** Разрешить (Allow)
5. Сохраните изменения

#### Selectel
1. Зайдите в панель: https://panel.selectel.com
2. Выберите сервер
3. Перейдите в **"Сеть"** → **"Файрвол"**
4. Добавьте правило для порта 22 (TCP)
5. Примените изменения

#### Другие провайдеры (Reg.ru, Beget, и т.д.)
- Ищите раздел **"Файрвол"**, **"Firewall"**, **"Безопасность"** или **"Network"**
- Добавьте правило для порта 22 (TCP, Inbound, Allow)

### Вариант 2: Через веб-консоль на сервере

Если у вас есть доступ к веб-консоли (VNC/Web SSH) в панели управления:

1. Откройте **"Консоль"** или **"Web SSH"** в панели
2. Выполните команды для настройки файрвола:

#### Если используется UFW (Ubuntu/Debian):
```bash
# Проверяем статус
ufw status

# Разрешаем SSH
ufw allow 22/tcp

# Включаем файрвол (если не включен)
ufw enable

# Проверяем правила
ufw status numbered
```

#### Если используется firewalld (CentOS/RHEL):
```bash
# Проверяем статус
firewall-cmd --state

# Добавляем правило для SSH
firewall-cmd --permanent --add-service=ssh
# или
firewall-cmd --permanent --add-port=22/tcp

# Перезагружаем файрвол
firewall-cmd --reload

# Проверяем правила
firewall-cmd --list-all
```

#### Если используется iptables:
```bash
# Разрешаем SSH
iptables -A INPUT -p tcp --dport 22 -j ACCEPT

# Сохраняем правила (Ubuntu/Debian)
iptables-save > /etc/iptables/rules.v4

# Или для CentOS/RHEL
service iptables save
```

### Вариант 3: Через API провайдера (для опытных)

Некоторые провайдеры предоставляют API для управления файрволом через панель управления.

## Проверка после открытия порта

После настройки файрвола проверьте подключение:

```bash
# С вашего компьютера
ssh root@144.31.64.130

# Или проверка порта
nc -zv 144.31.64.130 22
```

## Важно!

⚠️ **Безопасность:**
- После открытия SSH порта убедитесь, что используется безопасный пароль
- Рекомендуется использовать SSH ключи вместо паролей
- Рассмотрите возможность изменения порта SSH на нестандартный (например, 2222)

## После открытия порта

Как только порт будет открыт, вы сможете:
1. Подключиться через SSH
2. Запустить автоматический деплой скрипт: `./DEPLOY_ONE_COMMAND.sh`

Или выполнить команды вручную:
```bash
scp deploy.tar.gz root@144.31.64.130:/tmp/
ssh root@144.31.64.130
# затем команды из COMMANDS_FOR_SERVER.txt
```



